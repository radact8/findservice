<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>足立区 生活保護シミュレーター</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="card shadow mb-4">
        <div class="card-header bg-primary text-white">
            <h2 class="h5 mb-0">足立区 生活保護簡易判定シミュレーター</h2>
        </div>
        <div class="card-body">
            <p class="mb-4">
                世帯状況と収入を入力してください。<br>
                足立区の基準（1級地-1）に基づき、受給の可能性と概算額を判定します。
            </p>
            
            <form method="post">
                {% csrf_token %}
                
                <h5 class="text-secondary border-bottom pb-2 mb-3">1. 世帯の状況</h5>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">{{ form.age.label }}</label>
                        {{ form.age }}
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">{{ form.household_size.label }}</label>
                        {{ form.household_size }}
                        <div class="form-text text-muted">{{ form.household_size.help_text }}</div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">{{ form.num_children.label }}</label>
                        {{ form.num_children }}
                        <div class="form-text text-muted">{{ form.num_children.help_text }}</div>
                    </div>
                </div>

                <div class="mb-3">
                    <div class="form-check">
                        {{ form.is_single_parent }}
                        <label class="form-check-label" for="{{ form.is_single_parent.id_for_label }}">
                            {{ form.is_single_parent.label }}
                        </label>
                    </div>
                    <div class="form-text text-muted ps-4">{{ form.is_single_parent.help_text }}</div>
                </div>

                <h5 class="text-secondary border-bottom pb-2 mb-3 mt-4">2. 経済状況</h5>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">{{ form.rent.label }} <span class="badge bg-danger">必須</span></label>
                        {{ form.rent }}
                        <div class="form-text text-muted">{{ form.rent.help_text }}</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">{{ form.income.label }}</label>
                        {{ form.income }}
                        <div class="form-text text-muted">{{ form.income.help_text }}</div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">{{ form.savings.label }}</label>
                    {{ form.savings }}
                </div>

                <div class="mb-3">
                    <div class="form-check">
                        {{ form.has_asset }}
                        <label class="form-check-label" for="{{ form.has_asset.id_for_label }}">
                            {{ form.has_asset.label }}
                        </label>
                    </div>
                    <div class="form-text text-muted ps-4">{{ form.has_asset.help_text }}</div>
                </div>

                <h5 class="text-secondary border-bottom pb-2 mb-3 mt-4">3. 健康状態</h5>
                <div class="mb-4">
                    <label class="form-label fw-bold">{{ form.disability_level.label }}</label>
                    {{ form.disability_level }}
                    <div class="form-text text-muted">{{ form.disability_level.help_text }}</div>
                </div>

                <button type="submit" class="btn btn-primary w-100 py-2">判定する</button>
            </form>
        </div>
    </div>

    {% if result %}
        <div class="card shadow {% if result.is_eligible %}border-danger{% else %}border-secondary{% endif %}">
            <div class="card-header {% if result.is_eligible %}bg-danger{% else %}bg-secondary{% endif %} text-white">
                <h3 class="h5 mb-0">判定結果</h3>
            </div>
            <div class="card-body">
                
                <div class="alert {% if result.is_eligible %}alert-warning{% else %}alert-light{% endif %} text-center">
                    <h4 class="alert-heading fw-bold mb-0">{{ result.message }}</h4>
                </div>

                <hr>

                <div class="row text-center mb-3">
                    <div class="col-md-6 mb-3 mb-md-0">
                        <small class="text-muted d-block">あなたの世帯の最低生活費基準</small>
                        <span class="fs-5">{{ result.minimum_cost }} 円</span>
                    </div>
                    <div class="col-md-6">
                        {% if result.is_eligible %}
                            <small class="text-muted d-block">支給見込額</small>
                            <span class="fs-2 fw-bold text-danger">約 {{ result.amount }} 円 / 月</span>
                        {% else %}
                            <small class="text-muted d-block">基準超過額</small>
                            <span class="fs-4 fw-bold text-secondary">{{ result.excess }} 円 オーバー</span>
                        {% endif %}
                    </div>
                </div>

                <div class="alert alert-secondary mt-3">
                    <small>
                        <strong>※ご注意事項</strong><br>
                        この結果は概算であり、受給を保証するものではありません。<br>
                        実際の申請には、福祉事務所での面接や詳細な資産調査（銀行口座の照会など）が必要です。<br>
                        <a href="https://www.city.adachi.tokyo.jp/fukushi/fukushi-shogai/seikatsuhogo/index.html" target="_blank" class="alert-link">足立区 生活保護制度のページ（公式）</a>
                    </small>
                </div>

            </div>
        </div>
    {% endif %}
</div>

</body>
</html>